(this["webpackJsonpmovies-pr"]=this["webpackJsonpmovies-pr"]||[]).push([[0],{122:function(e,t,r){e.exports=r(203)},128:function(e,t,r){},183:function(e,t,r){},202:function(e,t,r){},203:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(20),c=r.n(o),i=r(50),s=r(51),u=r(76),l=r(75),p=r(93),v=r(212),h=r(214),d=r(102),m=r(211),f=r(210),g=r(117),b=r(209),w=r(207),E=r(213),y=r(208),S=(r(128),r(129),function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).croppingText=function(e){return e.length<160?e:"".concat(e.slice(0,e.indexOf(" ",160))," ...")},e.transformGenreName=function(t){var r=e.props.genreNames.filter((function(e){var r=e.id;return t===r}));return Object(g.a)(r,1)[0].name},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=v.a.Content,r=this.props,a=r.id,o=r.title,c=r.posterPath,i=r.overview,s=r.releaseDate,u=r.genreIds,l=s?Object(y.a)(new Date(s),"MMMM dd, yyyy"):"-";return n.a.createElement(f.b.Item,{key:a},n.a.createElement(b.a,{className:"card-movie",hoverable:!0,cover:c?n.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185".concat(c),alt:"Poster"}):n.a.createElement("div",{className:"no-poster"},n.a.createElement("i",null,"No poster"))},n.a.createElement(w.a,{direction:"vertical"},n.a.createElement("h5",{className:"card-movie__title"},o),n.a.createElement("span",{className:"card-movie__date"},l),n.a.createElement(t,null,u.map((function(t){return n.a.createElement(E.a,{key:t},e.transformGenreName(t))}))),n.a.createElement("p",{className:"card-movie__overview"},this.croppingText(i)))))}}]),r}(n.a.Component));S.defaultProps={title:"",posterPath:"",overview:"",releaseDate:""};var N=S,j=r(49),k=r.n(j),O=r(78),x=function(){function e(){Object(i.a)(this,e),this.apiKey="?api_key=05f7db0eb20b02a8803d7f7d0f3fb520",this.baseApi="https://api.themoviedb.org/3",this.transformSearchMovies=function(e){return{id:e.id,popularity:e.popularity,voteAverage:e.vote_average,title:e.title,originalTitle:e.original_title,overview:e.overview,posterPath:e.poster_path,releaseDate:e.release_date,genreIds:e.genre_ids}}}return Object(s.a)(e,[{key:"getResource",value:function(){var e=Object(O.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Could not fetch ".concat(t," received ").concat(r.status));case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("There is an error in getting resources -> ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchMovies",value:function(){var e=Object(O.a)(k.a.mark((function e(t,r){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getResource("".concat(this.baseApi,"/search/movie").concat(this.apiKey,"&language=en-US&query=").concat(t,"&page=").concat(r,"&include_adult=false"));case 3:return a=e.sent,e.abrupt("return",a.results.map(this.transformSearchMovies));case 7:throw e.prev=7,e.t0=e.catch(0),new Error("There is an error in search movies -> ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getGenreNames",value:function(){var e=Object(O.a)(k.a.mark((function e(){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.baseApi,"/genre/movie/list").concat(this.api_key,"&language=en-US"));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Could not fetch 'genre' received ".concat(t.status));case 6:return e.next=8,t.json();case 8:return r=e.sent,e.abrupt("return",r.genres);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("There is an error in getting genres -> ",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),M=(r(182),r(183),function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).movieService=new x,a.onError=function(){a.setState({error:!0,loading:!1})},a.addGenreNames=function(){a.movieService.getGenreNames().then((function(e){return a.setState({genreNames:e})})).catch(a.onError)},a.onSearchMoviesListLoaded=function(e){a.setState({moviesList:e,loading:!1})},a.updateSearchMovies=function(e,t){a.movieService.getSearchMovies(e,t).then(a.onSearchMoviesListLoaded).catch(a.onError)},a.handleChange=function(e){if(!(e.length<1)){var t=a.props.defaultPage;a.updateSearchMovies(e,t)}},a.state={moviesList:[],genreNames:[],error:!1,loading:!0},a.debouncedUpdate=Object(p.debounce)((function(e){return a.handleChange(e)}),1500),a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultSearchMovie,r=e.defaultPage;this.addGenreNames(),this.updateSearchMovies(t,r)}},{key:"render",value:function(){var e=this,t=v.a.Content,r=this.state,a=r.error,o=r.loading,c=r.moviesList,i=r.genreNames;return a?n.a.createElement("div",{className:"alert_example"},n.a.createElement(h.a,{type:"warning",message:"Oops!",description:"Something went wrong!",style:{width:300,fontSize:18},showIcon:!0})):o?n.a.createElement("div",{className:"example"},n.a.createElement(d.a,{size:"large"})):n.a.createElement(v.a,{className:"container"},n.a.createElement(t,null,n.a.createElement(m.a,{placeholder:"Type to search...",size:"large",style:{width:"100%",margin:"20px 0"},onChange:function(t){var r=t.target.value;return e.debouncedUpdate(r)}})),n.a.createElement(t,null,n.a.createElement(f.b,{className:"list-align",justify:"space-around",grid:{gutter:36,md:2},dataSource:c,renderItem:function(e){return n.a.createElement(N,{id:e.id,title:e.title,posterPath:e.posterPath,overview:e.overview,releaseDate:e.releaseDate,genreIds:e.genreIds,genreNames:i})}})))}}]),r}(a.Component));M.defaultProps={defaultPage:1,defaultSearchMovie:"return"};var _=M;r(202);c.a.render(n.a.createElement(_,null),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.d0dc86e0.chunk.js.map