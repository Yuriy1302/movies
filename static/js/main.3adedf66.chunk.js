(this["webpackJsonpmovies-pr"]=this["webpackJsonpmovies-pr"]||[]).push([[0],{127:function(e,t,a){e.exports=a(209)},132:function(e,t,a){},186:function(e,t,a){},191:function(e,t,a){},193:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),s=a.n(o),c=a(42),i=a(43),u=a(58),l=a(57),p=a(61),v=a(217),h=a(219),d=a(106),g=a(220),m=a(123),f=a(215),b=a(213),y=a(218),E=a(214),w=(a(132),a(133),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).croppingText=function(e){return e.length<100?e:"".concat(e.slice(0,e.indexOf(" ",100))," ...")},e.transformGenreName=function(t){var a=e.props.genreNames.filter((function(e){var a=e.id;return t===a}));return Object(m.a)(a,1)[0].name},e.ratingColor=function(e){return e>7?"#66e900":e>5?"#e9d100":e>3?"#e97e00":"#e90000"},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=v.a.Content,a=this.props,r=a.id,o=a.title,s=a.posterPath,c=a.overview,i=a.releaseDate,u=a.genreIds,l=a.voteAverage,p=i?Object(E.a)(new Date(i),"MMMM dd, yyyy"):"-",h={borderColor:this.ratingColor(l)};return n.a.createElement(g.b.Item,{key:r},n.a.createElement(f.a,{className:"card-movie",hoverable:!0,cover:s?n.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185".concat(s),alt:"Poster"}):n.a.createElement("div",{className:"no-poster"},n.a.createElement("i",null,"No poster"))},n.a.createElement(b.a,{direction:"vertical"},n.a.createElement("h5",{className:"card-movie__title"},o),n.a.createElement("span",{className:"card-movie__date"},p),n.a.createElement(t,null,u.map((function(t){return n.a.createElement(y.a,{key:t},e.transformGenreName(t))}))),n.a.createElement("p",{className:"card-movie__overview"},this.croppingText(c))),n.a.createElement("div",{className:"rating",style:h},l)))}}]),a}(n.a.Component));w.defaultProps={title:"",posterPath:"",overview:"",releaseDate:""};var S=w,j=a(111),N=a(216),O=(a(186),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;Object(c.a)(this,a);var n=(r=t.call(this,e)).props.onDebounced;return r.debouncedUpdate=Object(j.debounce)((function(e){return n(e)}),1500),r}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(N.a,{placeholder:"Type to search...",size:"large",style:{width:"100%",margin:"20px 0"},onChange:function(t){var a=t.target.value;return e.debouncedUpdate(a)}})}}]),a}(n.a.Component)),P=a(121),M=(a(97),a(191),function(e){var t=e.defaultPage,a=e.page,r=e.totalResults,o=e.onPageChange;return n.a.createElement(P.a,{style:{margin:"10px auto"},size:"small",showSizeChanger:!1,defaultPageSize:20,defaultCurrent:t,current:a,total:r,onChange:o})}),k=a(51),x=a.n(k),C=a(80),_=function(){function e(){Object(c.a)(this,e),this.apiKey="?api_key=05f7db0eb20b02a8803d7f7d0f3fb520",this.baseApi="https://api.themoviedb.org/3",this.transformSearchMovies=function(e){return{id:e.id,popularity:e.popularity,voteAverage:e.vote_average,title:e.title,originalTitle:e.original_title,overview:e.overview,posterPath:e.poster_path,releaseDate:e.release_date,genreIds:e.genre_ids}}}return Object(i.a)(e,[{key:"getResource",value:function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Could not fetch ".concat(t," received ").concat(a.status));case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("There is an error in getting resources -> ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchMovies",value:function(){var e=Object(C.a)(x.a.mark((function e(t,a){var r,n,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getResource("".concat(this.baseApi,"/search/movie").concat(this.apiKey,"&language=en-US&query=").concat(t,"&page=").concat(a,"&include_adult=false"));case 3:return r=e.sent,console.log("body => ",r),n=r.total_results,o=r.results.map(this.transformSearchMovies),e.abrupt("return",{totalResults:n,results:o});case 10:throw e.prev=10,e.t0=e.catch(0),new Error("There is an error in search movies -> ",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getGenreNames",value:function(){var e=Object(C.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.baseApi,"/genre/movie/list").concat(this.apiKey,"&language=en-US"));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Could not fetch 'genre' received ".concat(t.status));case 6:return e.next=8,t.json();case 8:return a=e.sent,e.abrupt("return",a.genres);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("There is an error in getting genres -> ",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),D=(a(193),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;Object(c.a)(this,a),(r=t.call(this,e)).movieService=new _,r.componentDidUpdate=function(e,t){var a=r.state,n=a.page,o=a.searchMovie;n!==t.page&&r.updateSearchMovies(o,n),window.scroll(0,0)},r.onError=function(){r.setState({error:!0,loading:!1})},r.addGenreNames=function(){r.movieService.getGenreNames().then((function(e){return r.setState({genreNames:e})})).catch(r.onError)},r.onSearchMoviesListLoaded=function(e){r.setState({moviesList:e.results,totalResults:e.totalResults,loading:!1})},r.updateSearchMovies=function(e,t){r.movieService.getSearchMovies(e,t).then(r.onSearchMoviesListLoaded).catch(r.onError)},r.onDebounced=function(e){if(!(e.length<1)){var t=r.props,a=t.page,n=t.defaultPage;r.setState({searchMovie:e,page:n}),r.updateSearchMovies(e,a)}},r.onPageChange=function(e){r.setState({page:e})},r.renderEmpty=function(){return n.a.createElement(p.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60}},n.a.createElement("h6",null,"The search did not return any results."),n.a.createElement("span",null,"Try changing your request."))};var o=r.props,s=o.defaultSearchMovie,i=o.defaultPage;return r.state={searchMovie:s,page:i,moviesList:[],totalResults:null,genreNames:[],error:!1,loading:!0},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultSearchMovie,a=e.defaultPage;this.addGenreNames(),this.updateSearchMovies(t,a)}},{key:"render",value:function(){var e=v.a.Content,t=this.state,a=t.error,r=t.loading,o=t.moviesList,s=t.genreNames,c=t.page,i=t.totalResults,u=this.props.defaultPage;return a?n.a.createElement("div",{className:"alert_example"},n.a.createElement(h.a,{type:"warning",message:"Oops!",description:"Something went wrong!",style:{width:300,fontSize:18},showIcon:!0})):r?n.a.createElement("div",{className:"example"},n.a.createElement(d.a,{size:"large"})):n.a.createElement(v.a,{className:"container"},n.a.createElement(e,null,n.a.createElement(O,{onDebounced:this.onDebounced})),n.a.createElement(e,null,o.length?n.a.createElement(g.b,{className:"list-align",justify:"space-around",grid:{gutter:36,md:2},dataSource:o,renderItem:function(e){return n.a.createElement(S,{id:e.id,title:e.title,posterPath:e.posterPath,overview:e.overview,releaseDate:e.releaseDate,genreIds:e.genreIds,voteAverage:e.voteAverage,genreNames:s})}}):this.renderEmpty()),i>20?n.a.createElement(M,{defaultPage:u,page:c,totalResults:i,onPageChange:this.onPageChange}):null)}}]),a}(r.Component));D.defaultProps={defaultPage:1,defaultSearchMovie:"return",page:D.defaultPage};var R=D;a(208);s.a.render(n.a.createElement(R,null),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.3adedf66.chunk.js.map